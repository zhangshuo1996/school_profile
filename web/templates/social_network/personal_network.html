{% extends 'social_network/base_social.html' %}

{% block title %} 校企合作推荐 {% endblock %}

{% block sidebar %}
    <form action="">
        <div class="row">
            <div class="form-group col-12">
                <label for="company_name">选择企业/高校</label>
                <div class="input-group">
                    <input type="text" class="form-control fuzzy-matching" data-org-type="c" id="company_name"
                           name="company_name" placeholder="请输入名称">
                    <ul class="list-group show-items"></ul>
                </div>
            </div>
            <div class="form-group col-12">
                <label for="company_name">选择人员</label>
                <div class="input-group">
                    <input type="text" class="form-control fuzzy-matching" data-org-type="c" id="person_name"
                           name="person_name" placeholder="请输入人员名称">
                    <ul class="list-group show-items"></ul>
                </div>
            </div>

            <div class="form-group col-12">
                <button type="button" class="btn btn-block btn-primary" id="selector-submit">确定
                </button>
            </div>
        </div>
    </form>
{% endblock %}

{% block main %}
    <div id="personal-network-chart"></div>
{% endblock %}

{% block scripts %}
    <script src="{{ url_for('static', filename='js/dist/echarts.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/statistics/create_graph.js') }}"></script>

    <script src="{{ url_for('static', filename='js/social_network/personal_network.js') }}"></script>

    <script>
        let csrf_token = "{{ csrf_token() }}";
        //在确保请求不属于GET HEAD OPTIONS TRACE，并且发向站内，才设置csrf_token
        $.ajaxSetup({
            beforeSend: function (xhr, settings) {
                if (!/^(GET|HEAD|OPTIONS|TRACE)$/i.test(settings.type) && !this.crossDomain) {
                    xhr.setRequestHeader("X-CSRFToken", csrf_token);
                }
            }
        });

    </script>
{% endblock %}