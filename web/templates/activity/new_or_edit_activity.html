{% extends 'base_header_breadcrumbs.html' %}

{% macro form_field(field, placeholder="") %}
    <div class="form-group row">
        <div class="col-auto d-flex align-items-center">
            {{ field.label(class='m-0') }}
        </div>
        <div class="col">
            {{ field(class="form-control", placeholder=placeholder, required="required") }}
        </div>
    </div>
    {% if field.errors %}
        {% for error in field.errors %}
            <small class="text-danger">{{ error }}</small>
        {% endfor %}
    {% endif %}
{% endmacro %}

{% block title %}
    {{ title }}
{% endblock %}

{% block styles %}
    <link href="{{ url_for('static', filename='css/bootstrap-datetimepicker.min.css') }}" rel="stylesheet">
    <link href="{{ url_for('static', filename='css/select2.min.css') }}" rel="stylesheet"/>

    <style>
        .ck-editor__editable_inline {
            min-height: 250px !important;
        }

        .ck-editor__editable_inline img {
            max-width: 100%;
        }

        #search {
            text-align: center;
            position: relative;
        }

        #select_id {
            text-align: center;
            position: relative;
        }

        .autocomplete {
            border: 1px solid #9ACCFB;
            background-color: white;
            text-align: left;
            position: absolute;
            z-index: 999;
        }

        .autocomplete li {
            list-style-type: none;
        }

        .clickable {
            cursor: default;
        }

        .highlight {
            background-color: #9ACCFB;
        }

        .delete-tag {
            position: absolute;
            top: -6px;
            right: -6px;
            display: none;
        }

        .school-tag:hover .delete-tag {
            display: block;
        }

        #avatar-container .position-absolute {
            bottom: 0;
            left: 0;
            right: 0;
            height: 50px;
            line-height: 50px;
            background: rgba(0, 0, 0, 0.4);
        }

    </style>
{% endblock %}

{% block main %}
    <div class="container">
        <form class="form-horizontal" action="" method="post" enctype="multipart/form-data">
            {{ form.hidden_tag() }}
            <div class="card">
                <div class="card-body">
                    {# 活动标题 #}
                    {{ form_field(form.title, placeholder="活动名称") }}
                    {# 活动项目 #}
                    {{ form_field(form.project) }}
                    {# 活动起止时间 #}
                    <div class="form-group row" id="date_input">
                        <div class="col-auto d-flex align-items-center">
                            <label for="start_time" class="control-label">时间</label>
                        </div>
                        <div class="col">
                            {{ form.start_time(size="16", class="form_datetime form-control", placeholder="开始时间", readonly="readonly") }}
                            <div class="row">
                                {% if form.start_time.errors %}
                                    {% for error in form.start_time.errors %}
                                        <small class="text-danger col-auto">{{ error }}</small>
                                    {% endfor %}
                                {% endif %}
                            </div>
                        </div>
                        <div class="col-auto d-flex align-items-center"><span>-</span></div>
                        <div class="col">
                            {{ form.end_time(size="16", class="form_datetime form-control", placeholder="结束时间", readonly="readonly") }}
                        </div>
                    </div>
                    {# 活动地址 #}
                    {{ form_field(form.address, placeholder="活动地址") }}
                    {# 活动简介 #}
                    {{ form_field(form.description, placeholder="活动简介") }}
                    <div class="form-row">
                        {{ form.submit(class="btn btn-primary ml-auto") }}
                    </div>
                </div>
            </div>
        </form>
    </div>
{% endblock %}

{% block scripts %}
    <script type="text/javascript" src="{{ url_for('static', filename='js/dist/bootstrap-datetimepicker.min.js') }}"></script>
    <script type="text/javascript" src="{{ url_for('static', filename='js/dist/bootstrap-datetimepicker.zh-CN.js') }}"></script>
    <script src="{{ url_for('static', filename='js/select2.js') }}"></script>
    <script src="{{ url_for('static', filename='js/activity/edit_activity.js') }}"></script>
    {{ ckeditor.load() }}
    {{ ckeditor.config(name='description') }}
{% endblock %}